# Задача 4.5: Создание UI для тестов

## Подготовка
- Внимательно изучи документы `bizlevel-concept-updated.md` и `status.md` для полного понимания архитектуры проекта и текущего статуса разработки.
- Ознакомься с реализацией из задачи 1.3 (Система темы), 4.2 (TestEngine) и с элементами UI из предыдущих фаз.
- Изучи принципы проектирования интерфейсов для интерактивных тестов и опросов.

## Описание задачи
Требуется разработать интерфейс для прохождения тестов, отображения вопросов и вариантов ответов, показа результатов и отзывов. Интерфейс должен поддерживать различные типы вопросов, быть интуитивно понятным и соответствовать общему геймифицированному стилю приложения.

Шаги:
1. Создать основной экран для прохождения тестов в директории `src/features/level_details/presentation/screens/`:
   - Разработать `TestScreen` с контейнером для отображения теста и навигацией
   - Реализовать отображение информации о тесте (название, описание, количество вопросов, проходной балл)
   - Добавить прогресс-бар для отображения текущего положения в тесте
   - Обеспечить функциональность перехода между вопросами

2. Разработать компоненты для различных типов вопросов в директории `src/features/level_details/presentation/widgets/`:
   - Создать базовый абстрактный виджет `QuestionWidget` для унификации интерфейса
   - Реализовать `SingleChoiceQuestionWidget` для вопросов с единственным правильным ответом
   - Добавить `MultipleChoiceQuestionWidget` для вопросов с несколькими правильными ответами
   - Создать `TextInputQuestionWidget` для вопросов с вводом текста
   - Реализовать `MatchingQuestionWidget` для вопросов на соответствие
   - Добавить `TrueFalseQuestionWidget` для вопросов типа "верно/неверно"

3. Создать компоненты для отображения результатов:
   - Разработать `TestResultsScreen` для отображения итогов прохождения теста
   - Создать виджет `ScoreDisplay` для визуализации набранных баллов
   - Добавить виджет `AnswerReviewWidget` для просмотра правильных и неправильных ответов
   - Реализовать виджет `FeedbackWidget` для отображения рекомендаций и объяснений

4. Реализовать интерактивные элементы и анимации:
   - Добавить анимации переходов между вопросами
   - Реализовать визуальную обратную связь при выборе ответов
   - Создать анимации для отображения результатов (успех/неудача)
   - Добавить интерактивные подсказки при необходимости

5. Создать контроллеры и провайдеры для управления UI:
   - Разработать `TestScreenController` для управления состоянием теста
   - Создать провайдеры для взаимодействия с `TestEngine`
   - Реализовать обработку таймера для тестов с временным ограничением
   - Добавить механизмы сохранения промежуточных ответов

## Технические требования
- Следуй принципам чистой архитектуры и MVVM паттерну
- Используй Riverpod для управления состоянием UI
- Реализуй адаптивный дизайн для корректной работы на мобильных устройствах, планшетах и десктопе
- Используй систему тем из задачи 1.3 для стилизации компонентов
- Обеспечь корректную работу интерфейса при смене ориентации экрана
- Реализуй плавные анимации переходов и отзывчивый интерфейс
- Обеспечь доступность UI (accessibility) для пользователей с ограниченными возможностями
- Используй анимации и визуальные эффекты для поддержания геймифицированного опыта

## Связи с другими задачами
- **Зависит от:** Задача 1.3 (Система темы), Задача 4.2 (TestEngine), Задача 3.3 (ProgressManager)
- **Влияет на:** Задача 4.7 (Интеграция и тестирование системы контента)

## Критерии готовности
- Создан полноценный интерфейс для прохождения тестов
- Реализована поддержка всех типов вопросов
- Работает отображение прогресса прохождения теста
- Реализован экран результатов с детальным обзором ответов
- Интерфейс адаптирован для различных размеров экрана
- Работают интерактивные элементы и анимации
- Обеспечена корректная интеграция с TestEngine
- Код имеет достаточное документирование

## Примечания
- Интерфейс должен быть интуитивно понятным и не требовать дополнительных инструкций
- Уделите внимание удобству взаимодействия с различными типами вопросов на сенсорных экранах
- Для вопросов с вводом текста реализуйте корректную обработку клавиатуры на мобильных устройствах
- При реализации интерфейса учитывайте возможность отображения изображений и форматированного текста в вопросах
- Предусмотрите механизм подтверждения завершения теста для предотвращения случайного выхода
- Для тестов с временным ограничением реализуйте наглядный таймер с предупреждениями об истечении времени
- Обеспечьте сохранение состояния теста при неожиданном закрытии приложения
- При разработке экрана результатов уделите внимание мотивационным элементам, поощряющим повторное прохождение в случае неудачи

## Завершение
После выполнения задачи добавь в файл `status.md` запись о выполненной работе в следующем формате:

Задача 4.5: Создание UI для тестов
* Статус: Выполнено
* Дата: [Текущая дата]
* Выполненные шаги:
    * Создан основной экран для прохождения тестов
    * Разработаны компоненты для различных типов вопросов
    * Реализован экран отображения результатов
    * Добавлены интерактивные элементы и анимации
    * Созданы контроллеры и провайдеры для управления UI
    * Реализована адаптивность для различных устройств
* Созданные файлы:
    * src/features/level_details/presentation/screens/test_screen.dart - экран прохождения теста
    * src/features/level_details/presentation/screens/test_results_screen.dart - экран результатов
    * src/features/level_details/presentation/widgets/question_widget.dart - базовый виджет вопроса
    * src/features/level_details/presentation/widgets/single_choice_question_widget.dart - вопрос с одним ответом
    * src/features/level_details/presentation/widgets/multiple_choice_question_widget.dart - вопрос с множественным выбором
    * src/features/level_details/presentation/widgets/text_input_question_widget.dart - вопрос с вводом текста
    * src/features/level_details/presentation/widgets/matching_question_widget.dart - вопрос на соответствие
    * src/features/level_details/presentation/widgets/true_false_question_widget.dart - вопрос верно/неверно
    * src/features/level_details/presentation/widgets/score_display.dart - отображение баллов
    * src/features/level_details/presentation/controllers/test_screen_controller.dart - контроллер экрана
    * src/features/level_details/presentation/providers/test_ui_providers.dart - провайдеры для UI
    * [Другие созданные файлы]
* Проблемы и решения:
    * [Если были проблемы, описание проблем и их решений]