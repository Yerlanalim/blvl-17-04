# Задача 4.6: Разработка UI для артефактов

## Подготовка
- Внимательно изучи документы `bizlevel-concept-updated.md` и `status.md` для полного понимания архитектуры проекта и текущего статуса разработки.
- Ознакомься с реализацией из задачи 1.3 (Система темы), 4.3 (ArtifactsManager) и с элементами UI из предыдущих фаз.
- Изучи принципы проектирования интерфейсов для работы с файлами и документами.

## Описание задачи
Требуется разработать интерфейс для отображения списка артефактов (скачиваемых материалов), просмотра их деталей и скачивания файлов. Интерфейс должен предоставлять удобный доступ к учебным материалам, отображать прогресс загрузки и обеспечивать возможность управления скачанными файлами.

Шаги:
1. Создать экраны для работы с артефактами в директории `src/features/level_details/presentation/screens/`:
   - Разработать `ArtifactsListScreen` для отображения списка доступных артефактов
   - Создать `ArtifactDetailsScreen` для просмотра подробной информации об артефакте
   - Реализовать `ArtifactViewerScreen` для предварительного просмотра содержимого (где возможно)
   - Добавить `DownloadedArtifactsScreen` для управления скачанными файлами

2. Разработать компоненты для отображения артефактов в директории `src/features/level_details/presentation/widgets/`:
   - Создать виджет `ArtifactListItem` для отображения элемента в списке
   - Реализовать виджет `ArtifactTypeIcon` для визуального обозначения типа файла
   - Добавить виджет `DownloadButton` с индикацией состояния и прогресса загрузки
   - Создать виджет `FilePreviewWidget` для предварительного просмотра содержимого файлов

3. Реализовать компоненты для отображения состояния загрузки:
   - Создать виджет `DownloadProgressIndicator` для отображения прогресса загрузки
   - Разработать виджет `DownloadStatusBadge` для индикации статуса (загружено, доступно, премиум)
   - Добавить виджет `ErrorMessageWidget` для отображения ошибок при загрузке
   - Реализовать систему уведомлений о завершении загрузки

4. Создать интерфейс для управления скачанными файлами:
   - Добавить функциональность поиска и фильтрации артефактов
   - Реализовать возможность сортировки по различным параметрам
   - Создать функцию для удаления ненужных файлов
   - Добавить отображение информации о занимаемом пространстве

5. Разработать контроллеры и провайдеры для управления UI:
   - Создать `ArtifactsScreenController` для управления экранами артефактов
   - Реализовать провайдеры для взаимодействия с `ArtifactsManager`
   - Добавить логику для обработки событий загрузки
   - Создать механизмы для обновления UI при изменении состояния загрузок

## Технические требования
- Следуй принципам чистой архитектуры и MVVM паттерну
- Используй Riverpod для управления состоянием UI
- Реализуй адаптивный дизайн для корректной работы на различных устройствах
- Используй систему тем из задачи 1.3 для стилизации компонентов
- Обеспечь интеграцию с нативными файловыми менеджерами платформ
- Реализуй функциональность предварительного просмотра для поддерживаемых типов файлов
- Используй анимации для плавных переходов и отображения прогресса
- Обеспечь доступность UI (accessibility) для пользователей с ограниченными возможностями

## Связи с другими задачами
- **Зависит от:** Задача 1.3 (Система темы), Задача 4.3 (ArtifactsManager), Задача 3.3 (ProgressManager)
- **Влияет на:** Задача 4.7 (Интеграция и тестирование системы контента)

## Критерии готовности
- Создан полноценный интерфейс для работы с артефактами
- Реализовано отображение списка доступных артефактов
- Работает просмотр подробной информации об артефакте
- Реализован функционал загрузки файлов с отображением прогресса
- Добавлен предварительный просмотр для поддерживаемых типов файлов
- Интерфейс адаптирован для различных размеров экрана
- Работают функции поиска, фильтрации и сортировки
- Обеспечена интеграция с системой прогресса
- Код имеет достаточное документирование

## Примечания
- При разработке интерфейса учитывайте особенности работы с файлами на различных платформах
- Для предварительного просмотра файлов можно использовать пакеты для работы с популярными форматами (PDF, DOCX, и т.д.)
- Реализуйте механизм для проверки наличия необходимого приложения для открытия файла на устройстве
- Предусмотрите возможность отмены загрузки и возобновления прерванных загрузок
- При отображении списка артефактов группируйте их по уровням или категориям для удобного доступа
- Добавьте возможность делиться артефактами через стандартные механизмы платформ
- Учитывайте ограничения доступа для премиум-контента при проектировании интерфейса
- Рассмотрите возможность добавления функции "избранное" для быстрого доступа к часто используемым материалам

## Завершение
После выполнения задачи добавь в файл `status.md` запись о выполненной работе в следующем формате:

Задача 4.6: Разработка UI для артефактов
* Статус: Выполнено
* Дата: [Текущая дата]
* Выполненные шаги:
    * Создан экран списка артефактов
    * Разработан экран деталей артефакта
    * Реализован функционал загрузки файлов с отображением прогресса
    * Добавлен предварительный просмотр содержимого
    * Реализован интерфейс управления скачанными файлами
    * Настроены контроллеры и провайдеры для управления UI
* Созданные файлы:
    * src/features/level_details/presentation/screens/artifacts_list_screen.dart - экран списка артефактов
    * src/features/level_details/presentation/screens/artifact_details_screen.dart - экран деталей артефакта
    * src/features/level_details/presentation/screens/artifact_viewer_screen.dart - экран просмотра артефакта
    * src/features/level_details/presentation/screens/downloaded_artifacts_screen.dart - экран скачанных артефактов
    * src/features/level_details/presentation/widgets/artifact_list_item.dart - элемент списка артефактов
    * src/features/level_details/presentation/widgets/artifact_type_icon.dart - иконка типа артефакта
    * src/features/level_details/presentation/widgets/download_button.dart - кнопка загрузки
    * src/features/level_details/presentation/widgets/download_progress_indicator.dart - индикатор прогресса
    * src/features/level_details/presentation/widgets/file_preview_widget.dart - предпросмотр файла
    * src/features/level_details/presentation/controllers/artifacts_screen_controller.dart - контроллер экрана
    * src/features/level_details/presentation/providers/artifacts_ui_providers.dart - провайдеры для UI
    * [Другие созданные файлы]
* Проблемы и решения:
    * [Если были проблемы, описание проблем и их решений]