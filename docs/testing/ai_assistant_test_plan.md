# План тестирования ИИ-ассистента BizLevel

## 1. Цели тестирования
- Проверить корректность работы всех компонентов ассистента (сервер, клиент, кэш, UI, интеграция с прогрессом)
- Оценить производительность, стабильность, качество ответов
- Обеспечить надежность в различных сетевых и пользовательских сценариях

## 2. Ключевые метрики
- Время отклика (end-to-end latency)
- Доля кэшированных ответов
- Количество ошибок/исключений
- Качество ответов (оценка пользователями/экспертами)
- Успешность интеграции с прогрессом
- Стабильность UI (корректная обработка AsyncValue)
- Использование токенов Gemini API

## 3. Тестовые сценарии
### 3.1. Юнит-тесты
- AIAssistantService: формирование и отправка запросов, обработка ошибок, кэширование, работа сессий
- ai_cache_manager: кэширование, инвалидация, оффлайн-режим
- context_builder: формирование контекста, оптимизация
- ai_progress_integrator: интеграция с системой прогресса
- Cloud Functions: авторизация, rate limiting, обработка ошибок, сохранение истории

### 3.2. Интеграционные тесты
- Взаимодействие UI ↔ сервис ↔ Cloud Function ↔ кэш
- Сценарии: отправка сообщения, получение ответа, повторный запрос (кэш), сбой сети, восстановление
- Проверка интеграции с прогрессом

### 3.3. Пользовательские сценарии
- Быстрый ввод, длинные диалоги, смена сессий, ошибки сети
- A/B тестирование промптов и стратегий формирования контекста

## 4. Методология сравнения
- Сравнение времени отклика и качества ответов до/после оптимизаций
- Использование "золотого стандарта" ответов для эталонных кейсов
- Сбор и анализ пользовательской обратной связи

## 5. Документирование
- docs/testing/ai_assistant_test_plan.md — план тестирования
- docs/testing/ai_assistant_test_results.md — результаты тестирования
- docs/performance/ai_assistant_optimization.md — оптимизации и профилирование
- docs/development/ai_assistant_best_practices.md — лучшие практики

## 6. Используемые инструменты
- flutter_test, mocktail (или mockito) — юнит-тесты
- Firebase Test Lab — тестирование на устройствах
- Flutter DevTools, Firebase Performance — профилирование
- Firebase Analytics — сбор пользовательских данных

## 7. Критерии готовности
- Все тесты реализованы и проходят успешно
- Проведено профилирование и оптимизация
- Собрана и проанализирована обратная связь
- Документированы результаты и рекомендации 