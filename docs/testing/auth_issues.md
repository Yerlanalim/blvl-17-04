# Тестирование правил Firestore для аутентификации

## Проверка безопасности (Firebase Emulator)

Для проверки корректности работы правил безопасности Firestore использовался Firebase Emulator Suite. Были реализованы следующие тест-кейсы:

### 1. Неавторизованный пользователь
- ❌ Не может читать или писать в коллекции users
- ❌ Не может читать или писать в коллекции progress
- ❌ Не может читать или писать в коллекциях levels, videos, tests, artifacts

### 2. Авторизованный пользователь (uid = 'userA')
- ✅ Может читать и писать только свой документ users/userA
- ✅ Может читать и писать только свои документы progress/userA/*
- ❌ Не может читать или писать чужие users/{userB} и progress/{userB}/*
- ✅ Может читать документы levels, videos, tests, artifacts
- ❌ Не может писать в levels, videos, tests, artifacts

### 3. Попытка доступа к чужим данным
- ❌ userA не может читать/писать users/userB
- ❌ userA не может читать/писать progress/userB/*

### 4. Попытка записи в контентные коллекции
- ❌ Любой пользователь не может писать в levels, videos, tests, artifacts

## Рекомендации
- Все тесты должны запускаться в CI с использованием Firebase Emulator.
- Для production-окружения использовать только строгие правила.

---

## Проблемы и решения
- На момент тестирования проблем с обходом правил не выявлено.
- Для интеграционных тестов рекомендуется использовать отдельные тестовые аккаунты и уникальные userId.
